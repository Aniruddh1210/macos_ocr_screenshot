#!/usr/bin/env bash
# Launch selective OCR (Google Lens-like) UI
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
ROOT_DIR="$(cd "${SCRIPT_DIR}/.." && pwd)"

APP_BUNDLE="${ROOT_DIR}/OCRSelect2.app/Contents/MacOS/TextGrabber"
APP_BIN="${ROOT_DIR}/OCRSelect/OCRSelect"

# Prefer app bundle, fall back to raw binary
if [ -x "$APP_BUNDLE" ]; then
  open -a "${ROOT_DIR}/OCRSelect2.app"
elif [ -x "$APP_BIN" ]; then
  "$APP_BIN"
else
  echo "OCRSelect not built yet. Build it with: make lens-bundle" >&2
  exit 1
fi
